import{j as l,f as p,h as b,n as E,S as I,t as k,Y as v,v as R,w as B,r as g,k as y,I as T,p as C,i as D,b as $,R as L,a as z}from"./index-4cf28dcc.js";import{g as S,C as J,a as N}from"./editor-5f16a188.js";const U="_view_jc07f_6",Y={view:U},M=()=>l.jsx("section",{className:Y.view,children:l.jsx("span",{children:"fileControlsHeader"})}),H="_view_1ahzg_6",O="_file_1ahzg_13",V="_odd_1ahzg_18",_={view:H,file:O,odd:V},W=({files:n})=>l.jsx("section",{className:_.view,children:n.map((e,r)=>{const s=r%2===1;return console.log(s),l.jsxs("div",{className:p(_.file,s&&_.odd),children:[l.jsx("div",{className:_.fileName,children:e.name}),l.jsx("div",{className:_.fileType,children:e.type.split(".")[1]})]},e.name)})}),q="_widget_1y5rb_6",G={widget:q},K=({filePath:n})=>l.jsx("div",{className:G.widget,children:n}),Q=({path:n})=>l.jsx("section",{children:l.jsx(K,{filePath:n})}),X="_view_2nfvg_6",Z={view:X},ee=()=>l.jsxs("section",{className:Z.view,children:[l.jsx(M,{}),l.jsx(W,{files:[{type:"file",name:"test.txt"},{type:"file",name:"test2.txt"},{type:"file",name:"test3.txt"},{type:"file",name:"test4.txt"}]}),l.jsx(Q,{path:"/file/path"})]}),re=({children:n})=>(b.useState(null),E("files"),l.jsxs("div",{className:"grid grid-cols-[auto,1fr] h-full overflow-hidden",children:[l.jsx(I,{items:[{type:k.Button,label:"Upload File",icon:v.Upload,onClick:()=>0},{type:k.Separator,label:"",icon:v.Plus,onClick:()=>0}],title:"Files",defaultState:R.NormalExpanded}),l.jsx(ee,{})]}));function m(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}function P(n,e){for(var r="",s=0,i=-1,a=0,t,o=0;o<=n.length;++o){if(o<n.length)t=n.charCodeAt(o);else{if(t===47)break;t=47}if(t===47){if(!(i===o-1||a===1))if(i!==o-1&&a===2){if(r.length<2||s!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var c=r.lastIndexOf("/");if(c!==r.length-1){c===-1?(r="",s=0):(r=r.slice(0,c),s=r.length-1-r.lastIndexOf("/")),i=o,a=0;continue}}else if(r.length===2||r.length===1){r="",s=0,i=o,a=0;continue}}e&&(r.length>0?r+="/..":r="..",s=2)}else r.length>0?r+="/"+n.slice(i+1,o):r=n.slice(i+1,o),s=o-i-1;i=o,a=0}else t===46&&a!==-1?++a:a=-1}return r}function te(n,e){var r=e.dir||e.root,s=e.base||(e.name||"")+(e.ext||"");return r?r===e.root?r+s:r+n+s:s}var w={resolve:function(){for(var e="",r=!1,s,i=arguments.length-1;i>=-1&&!r;i--){var a;i>=0?a=arguments[i]:(s===void 0&&(s=process.cwd()),a=s),m(a),a.length!==0&&(e=a+"/"+e,r=a.charCodeAt(0)===47)}return e=P(e,!r),r?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(m(e),e.length===0)return".";var r=e.charCodeAt(0)===47,s=e.charCodeAt(e.length-1)===47;return e=P(e,!r),e.length===0&&!r&&(e="."),e.length>0&&s&&(e+="/"),r?"/"+e:e},isAbsolute:function(e){return m(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,r=0;r<arguments.length;++r){var s=arguments[r];m(s),s.length>0&&(e===void 0?e=s:e+="/"+s)}return e===void 0?".":w.normalize(e)},relative:function(e,r){if(m(e),m(r),e===r||(e=w.resolve(e),r=w.resolve(r),e===r))return"";for(var s=1;s<e.length&&e.charCodeAt(s)===47;++s);for(var i=e.length,a=i-s,t=1;t<r.length&&r.charCodeAt(t)===47;++t);for(var o=r.length,c=o-t,d=a<c?a:c,u=-1,f=0;f<=d;++f){if(f===d){if(c>d){if(r.charCodeAt(t+f)===47)return r.slice(t+f+1);if(f===0)return r.slice(t+f)}else a>d&&(e.charCodeAt(s+f)===47?u=f:f===0&&(u=0));break}var A=e.charCodeAt(s+f),F=r.charCodeAt(t+f);if(A!==F)break;A===47&&(u=f)}var j="";for(f=s+u+1;f<=i;++f)(f===i||e.charCodeAt(f)===47)&&(j.length===0?j+="..":j+="/..");return j.length>0?j+r.slice(t+u):(t+=u,r.charCodeAt(t)===47&&++t,r.slice(t))},_makeLong:function(e){return e},dirname:function(e){if(m(e),e.length===0)return".";for(var r=e.charCodeAt(0),s=r===47,i=-1,a=!0,t=e.length-1;t>=1;--t)if(r=e.charCodeAt(t),r===47){if(!a){i=t;break}}else a=!1;return i===-1?s?"/":".":s&&i===1?"//":e.slice(0,i)},basename:function(e,r){if(r!==void 0&&typeof r!="string")throw new TypeError('"ext" argument must be a string');m(e);var s=0,i=-1,a=!0,t;if(r!==void 0&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var o=r.length-1,c=-1;for(t=e.length-1;t>=0;--t){var d=e.charCodeAt(t);if(d===47){if(!a){s=t+1;break}}else c===-1&&(a=!1,c=t+1),o>=0&&(d===r.charCodeAt(o)?--o===-1&&(i=t):(o=-1,i=c))}return s===i?i=c:i===-1&&(i=e.length),e.slice(s,i)}else{for(t=e.length-1;t>=0;--t)if(e.charCodeAt(t)===47){if(!a){s=t+1;break}}else i===-1&&(a=!1,i=t+1);return i===-1?"":e.slice(s,i)}},extname:function(e){m(e);for(var r=-1,s=0,i=-1,a=!0,t=0,o=e.length-1;o>=0;--o){var c=e.charCodeAt(o);if(c===47){if(!a){s=o+1;break}continue}i===-1&&(a=!1,i=o+1),c===46?r===-1?r=o:t!==1&&(t=1):r!==-1&&(t=-1)}return r===-1||i===-1||t===0||t===1&&r===i-1&&r===s+1?"":e.slice(r,i)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return te("/",e)},parse:function(e){m(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return r;var s=e.charCodeAt(0),i=s===47,a;i?(r.root="/",a=1):a=0;for(var t=-1,o=0,c=-1,d=!0,u=e.length-1,f=0;u>=a;--u){if(s=e.charCodeAt(u),s===47){if(!d){o=u+1;break}continue}c===-1&&(d=!1,c=u+1),s===46?t===-1?t=u:f!==1&&(f=1):t!==-1&&(f=-1)}return t===-1||c===-1||f===0||f===1&&t===c-1&&t===o+1?c!==-1&&(o===0&&i?r.base=r.name=e.slice(1,c):r.base=r.name=e.slice(o,c)):(o===0&&i?(r.name=e.slice(1,t),r.base=e.slice(1,c)):(r.name=e.slice(o,t),r.base=e.slice(o,c)),r.ext=e.slice(t,c)),o>0?r.dir=e.slice(0,o-1):i&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};w.posix=w;var x=w;const se=B(x),ne=({path:n=""})=>{const e=g.useRef(null),[r,s]=g.useState(S(x.extname(n).replace(".",""))==="json");return g.useEffect(()=>{if(!e.current)return;const i=new J(e.current);y.postText("/app/files/get/file",{path:n},a=>{let t=a;r&&(t=JSON.stringify(JSON.parse(t),null,2));let o=new N(S(x.extname(n).replace(".","")));o||(o=new N("plainText")),console.log(t),console.log(o),i._debugRenderParsedString(t,o)})},[!!e.current,n,r]),l.jsxs("section",{className:"flex flex-col gap-2",children:[l.jsx("div",{className:"flex gap-1",children:l.jsx(T,{icon:v.ArrowSwitch,onClick:()=>{s(!r)}})}),l.jsx("div",{"data-yourdash-codestudio-editor":"true",className:"overflow-auto w-full p-2",ref:e})]})},ie=({path:n=""})=>{const[e,r]=g.useState(null);return g.useEffect(()=>{y.postText("/app/files/get/file",{path:n},s=>{r(s)})},[n]),e?l.jsx("main",{className:"w-full h-full flex items-center justify-center overflow-auto",children:l.jsx("img",{alt:"",src:`${y.getInstanceUrl()}${e}`})}):null},le=({path:n})=>{const[e,r]=b.useState(null);switch(b.useEffect(()=>{switch(se.extname(n).replace(".","")){case"jpg":case"jpeg":case"png":case"gif":case"webp":case"svg":case"avif":r("image");break;default:r("text")}},[n]),e){case"image":return l.jsx(ie,{path:n});case"text":return l.jsx(ne,{path:n});default:return l.jsx("main",{className:"w-full h-full flex items-center justify-center overflow-hidden font-semibold text-5xl tracking-wide animate__animated animate__fadeIn",children:l.jsx("h1",{children:"Detecting file type..."})})}},ae="_files_rxwwk_6",oe="_item_rxwwk_10",ce="_itemButton_rxwwk_15",fe="_itemIcon_rxwwk_22",h={files:ae,item:oe,itemButton:ce,itemIcon:fe},ue=()=>{const[n,e]=g.useState("/"),[r,s]=g.useState([]),i=E("files");return g.useEffect(()=>{y.postJson("/app/files/get/thumbnails-small",{path:n},a=>{if(Object.keys(a.files).length===0)return s([]);s((a==null?void 0:a.files)||[])})},[n]),l.jsxs(l.Fragment,{children:[l.jsxs("section",{className:"p-2 flex flex-col bg-container-bg top-0 sticky gap-2 shadow-lg z-10",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(T,{disabled:n==="/",onClick:()=>{e(x.join(n,".."))},icon:v.ChevronLeft}),l.jsx("span",{children:n})]}),!x.extname(n)&&l.jsxs("div",{className:p("bg-container-bg pl-2 pr-2 text-left transition-colors [transition:var(--transition)] hover:[transition:var(--transition-fast)] flex items-center"),children:[l.jsx(C,{icon:v.Info,className:"h-[calc(100%-0.35rem)] mr-1.5",color:"rgb(var(--container-fg))"}),l.jsx("span",{className:"mr-auto",children:i("NAME")}),l.jsx("span",{children:i("TYPE")})]})]}),x.extname(n)?l.jsx(le,{path:n}):l.jsx("section",{className:h.files,children:r.map(a=>l.jsx(D,{items:[{name:"Delete",onClick(){return 0}},{name:"Pin to sidebar",onClick(){return 0}}],className:h.item,children:l.jsxs($,{onClick:()=>{e(x.join(n,a.name))},className:h.itemButton,children:[a.icon===""?a.type==="dir"?l.jsx(C,{className:h.itemIcon,icon:v.FileDirectory}):l.jsx(C,{className:h.itemIcon,icon:v.File}):l.jsx("img",{className:h.itemIcon,alt:"",src:`${y.getInstanceUrl()}${a.icon}`}),l.jsx("span",{className:"pl-2 pr-2 text-ellipsis",children:a.name})]})},a.name))})]})},de=()=>l.jsx(re,{children:l.jsx(ue,{})}),ve=()=>l.jsx(L,{children:l.jsx(z,{index:!0,element:l.jsx(de,{})})});export{ve as default};
