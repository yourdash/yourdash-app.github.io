import{u as f,j as e,C as p,f as q,e as _,I as y,U as g,A as B,r as m,i as w,H as h,N as P,Z as E,w as U,M as O,Q as Y,t as C,v as G,R as J,a as u}from"./index-35df064e.js";import{T as H}from"./TextInput-b9d5c21b.js";import{C as A}from"./ComingSoon-6c1cddb1.js";import{C as M}from"./Carousel-9ff1b0fe.js";const z=""+new URL("background-d6129230.svg",import.meta.url).href,K="_component_b7su2_6",V="_background_b7su2_14",X="_gradient_b7su2_33",F="_label_b7su2_42",b={component:K,background:V,gradient:X,label:F},Q=({id:s})=>{const a=f();return e.jsxs(p,{unStyledClickable:!0,onClick:()=>a(`/app/a/store/cat/${s}`),className:b.component,children:[e.jsx("div",{className:b.background,style:{backgroundImage:`url(${z})`}}),e.jsx("span",{className:b.label,children:s.slice(0,1).toUpperCase()+s.slice(1)})]})},Z="_component_1qnly_6",W="_section_1qnly_18",D="_label_1qnly_24",I={component:Z,section:W,label:D},R=({displayName:s,id:a,icon:t})=>{const c=f();return e.jsxs(q,{onClick:()=>c(`/app/a/store/app/${a}`),className:I.component,children:[e.jsx("img",{loading:"lazy",src:`${_.getInstanceUrl()}${t}`,className:"aspect-square h-16",alt:""}),e.jsx("div",{className:I.section,children:e.jsx("span",{className:I.label,children:s})})]})},ee=""+new URL("icon-6539e4a9.avif",import.meta.url).href,se="_component_1f0jx_6",ne="_applicationLogo_1f0jx_21",ae="_brand_1f0jx_25",te="_productName_1f0jx_31",ce="_actions_1f0jx_44",j={component:se,applicationLogo:ne,brand:ae,productName:te,actions:ce},S=({showBackButton:s})=>{const a=f();return e.jsxs(p,{showBorder:!0,className:j.component,children:[s&&e.jsx(y,{icon:g.ChevronLeft,onClick:()=>{let t="";for(let c=0;c<s;c++)t+="../";a(t)}}),e.jsx("img",{alt:"YourDash Store Application Logo",className:j.applicationLogo,src:ee}),e.jsx("div",{className:j.brand,children:e.jsx("span",{className:j.productName,children:"YourDash Store"})}),e.jsxs("div",{className:j.actions,children:[e.jsx(H,{accessibleName:"Search Applications",onChange:t=>t,placeholder:"Search Applications",className:j.searchInput,icon:g.Search}),e.jsx(y,{icon:g.Database,onClick:()=>{console.log("Implement me!")}}),e.jsx(y,{icon:g.Download,onClick:()=>{console.log("Implement me!")}})]})]})},le="_main_1gz15_6",oe={main:le},L=()=>{const s=B("store"),[a,t]=m.useState([]),[c,d]=m.useState([]),[o,n]=m.useState([]);return m.useEffect(()=>{_.syncGetJson("/app/store/promoted/applications",l=>{t(l)}),_.syncGetJson("/app/store/categories",l=>{d(l)}),_.syncGetJson("/app/store/applications",l=>{n(l)})},[]),e.jsxs("main",{className:w("flex flex-col gap-2",oe.main),children:[e.jsx(S,{}),e.jsx(h,{level:2,children:s("ALL_CATEGORIES_SECTION")}),c.length!==0&&e.jsx("section",{className:"grid 3xl:grid-cols-3 md:grid-cols-2 grid-cols-1 lg:gap-2 gap-2 animate__animated animate__fadeIn animate__250ms",children:c.map(l=>e.jsx(Q,{id:l},l))}),e.jsx(h,{level:2,children:s("ALL_APPLICATIONS_SECTION")}),o.length!==0&&e.jsx("section",{className:"grid grid-cols-1 gap-2 animate__animated animate__fadeIn animate__500ms md:grid-cols-2 lg:grid-cols-3",children:o.map(l=>e.jsx(R,{id:l.value,displayName:l.displayName,icon:l.icon},l.value))})]})},ie="_main_5kgpr_6",re={main:ie},T=()=>{const s=f(),{id:a}=P(),[t,c]=m.useState(),[d,o]=m.useState(!0);return m.useEffect(()=>{_.syncGetJson(`/app/store/category/${a}`,n=>{c(n),o(!1)},()=>{s("/app/a/store")})},[a,s]),a?e.jsxs("div",{className:re.main,children:[e.jsx(S,{showBackButton:2}),d?e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(E,{})}):e.jsxs(e.Fragment,{children:[e.jsx(h,{level:1,className:"p-6",children:`${t==null?void 0:t.displayName}`}),e.jsx("div",{className:"w-full max-h-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 animate__animated animate__fadeIn animate__250ms",children:t&&t.applications.map(n=>e.jsx(R,{displayName:n.displayName,id:n.name,icon:n.icon},n.name))})]})]}):(s("/app/a/store"),null)},de=""+new URL("background-d6129230.svg",import.meta.url).href,me="_closeButton_1km2c_6",ue="_handle_1km2c_21",pe="_component_1km2c_44",xe="_content_1km2c_70",he="_title_1km2c_78",_e="_placeholder_1km2c_90",je="_background_1km2c_95",ge="_hidden_1km2c_104",x={closeButton:me,handle:ue,component:pe,content:xe,title:he,placeholder:_e,background:je,hidden:ge},fe=({children:s,onClose:a,className:t,visible:c,style:d,title:o})=>{const[n,l]=m.useState(0);return e.jsx("div",{className:`${x.background} ${c===!1&&x.hidden}`,onClick:a,onMouseUp:i=>{i.screenY>n&&(a==null||a())},onTouchEnd:i=>{i.touches[0].screenY<n&&(a==null||a())},children:e.jsxs(p,{showBorder:!0,className:`${x.component} ${c===!1&&x.hidden} animate__animated animate__flipInX animate__duration_750ms`,style:d,onMouseUp:i=>{i.stopPropagation()},onClick:i=>{i.stopPropagation()},unStyledClickable:!0,children:[e.jsx("section",{className:x.handle,onMouseDown:i=>{l(i.screenY)},onMouseUp:i=>{i.screenY<n&&(a==null||a())},onTouchStart:i=>{l(i.touches[0].screenY)},onTouchEnd:i=>{i.touches[0].screenY<n&&(a==null||a())},children:e.jsx("div",{})}),e.jsx(y,{className:x.closeButton,"data-visible":!!a,icon:g.X,onClick:a}),e.jsxs("section",{className:`${x.content} ${t}`,children:[e.jsx("h1",{className:`${x.title} ${(o===""||o===void 0)&&x.placeholder}`,children:o}),s]})]})})},Ne=({applicationData:s,onClose:a,onConfirm:t})=>{var d;const c=f();return e.jsx(fe,{onClose:a,title:`Confirm installation of ${s==null?void 0:s.displayName}`,children:e.jsxs("section",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{children:`Do you want to install ${s==null?void 0:s.displayName}?`}),(s==null?void 0:s.requiresBackend)&&e.jsx(p,{level:"tertiary",className:"flex flex-col gap-2",children:e.jsx("div",{children:"Installing this application will automatically load it's supplied backend module on startup."})}),(s==null?void 0:s.dependencies)&&((d=s.dependencies)==null?void 0:d.length)!==0&&e.jsxs(p,{level:"tertiary",className:"flex flex-col gap-2",children:[e.jsx("div",{children:"The following dependency applications will be installed automatically."}),e.jsx("div",{className:"flex flex-wrap w-full",children:s.dependencies.map(o=>e.jsx(p,{className:"p-2 flex-grow text-center",level:"tertiary",onClick:()=>{c(`/app/a/store/app/${o}`)},children:o},o))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(U,{onClick:()=>{a()},children:"Cancel"}),e.jsx(O,{onClick:()=>{t()},children:"Confirm installation"})]})]})})};function k(s,a,t,c){_.syncGetJson(`/app/store/application/${s}`,d=>{a(d),t(!1)},()=>{c("/app/a/store")})}const ve="_main_1u2ub_6",ye="_contentContainer_1u2ub_19",we="_contentSection_1u2ub_32",N={main:ve,contentContainer:ye,contentSection:we},be=()=>{var $;const s=B("store"),a=Y(),t=f(),{id:c}=P(),[d,o]=m.useState(!0),[n,l]=m.useState(),[i,v]=m.useState(!1);return m.useEffect(()=>{v(!1),o(!0),k(c||"dash",r=>l(r),o,t)},[c,t]),c?e.jsxs("div",{className:"h-full relative",children:[i&&e.jsx(Ne,{applicationData:n,onClose:()=>v(!1),onConfirm:()=>{_.postJson(`/app/store/application/install/${n==null?void 0:n.name}`,{},r=>{r.success&&(k(c,l,o,t),a.toast.success("Installed Application",`Installed "${n==null?void 0:n.name}" successfully`)),window.__yourdashCorePanelReload()}),v(!1)}}),d?e.jsx("div",{className:w("w-full h-full flex items-center justify-center",N.main),children:e.jsx(E,{})}):n&&e.jsxs("div",{className:N.main,children:[e.jsx(S,{showBackButton:2}),e.jsxs("header",{className:"flex flex-col w-full bg-container-bg rounded-container-rounding overflow-hidden",children:[e.jsxs("div",{style:{backgroundImage:`url(${de})`},className:"sm:h-64 h-32 transition-all bg-cover bg-center flex select-none items-center justify-center flex-row gap-3 animate__animated animate__fadeIn",children:[e.jsx(C,{authenticatedImage:!0,className:"aspect-square drop-shadow-lg sm:w-24 w-0 transition-all",src:n.icon,accessibleLabel:"Application icon"}),e.jsx(h,{className:"drop-shadow-lg",children:n.displayName})]}),e.jsxs("section",{className:"flex items-center p-4 gap-4 max-w-[50rem] w-full ml-auto mr-auto animate__animated animate__fadeIn animate__250ms",children:[e.jsx(C,{authenticatedImage:!0,className:"w-24 aspect-square select-none",src:n.icon,accessibleLabel:"Application icon"}),e.jsx(h,{level:2,className:"mr-auto",children:n.displayName}),e.jsxs("div",{className:"flex gap-2",children:[n.installed&&e.jsx(O,{onClick:()=>{t(`/app/a/${n.name}`)},children:s("OPEN_APPLICATION")}),e.jsx(U,{onClick:()=>{n.installed?_.postJson(`/app/store/application/uninstall/${n.name}`,{},r=>{r.success&&(k(c,l,o,t),a.toast.success("Uninstalled Application",`Uninstalled "${n.name}" successfully`)),window.__yourdashCorePanelReload()}):v(!0)},children:n.installed?s("UNINSTALL"):s("INSTALL")})]})]})]}),e.jsxs("div",{className:N.contentContainer,children:[e.jsxs("section",{className:w(N.contentSection,"max-w-3xl w-full"),children:[e.jsxs(p,{showBorder:!0,className:"col-span-2",children:[e.jsx(h,{level:3,children:s("DESCRIPTION_SECTION")}),n.description]}),e.jsxs(p,{showBorder:!0,className:"flex flex-col items-start col-span-2 child:w-full",children:[e.jsx(h,{level:3,children:s("ABOUT_SECTION")}),e.jsx("div",{children:`Category: ${n.category}`}),e.jsx("div",{children:`ID: ${n.name}`}),e.jsx("div",{children:`Requires Backend: ${n.requiresBackend}`}),e.jsx("br",{}),e.jsx("div",{children:"Created as part of the YourDash Project"})]})]}),e.jsxs("section",{className:w(N.contentSection,"max-w-lg w-full"),children:[e.jsxs(p,{showBorder:!0,onClick:()=>{window.open(`https://github.com/yourdash/yourdash/tree/main/packages/applications/${n.name}`)},className:"flex gap-1 items-center",children:[e.jsx(G,{className:"h-5",icon:g.Link}),e.jsx("span",{children:"View Source"})]}),e.jsxs("section",{className:"w-full",children:[e.jsx(h,{level:3,children:s("AUTHORS_SECTION")}),e.jsx(M,{children:($=n.authors)==null?void 0:$.map(r=>e.jsxs(p,{className:"flex !flex-col gap-2",showBorder:!0,onClick:()=>{window.location.href=r.site},children:[e.jsx("img",{className:"h-24 aspect-square rounded-container-rounding",src:r.avatarUrl,alt:r.avatarUrl}),e.jsxs("div",{className:"flex items-center justify-between gap-2 flex-col w-full",children:[e.jsx("span",{children:r.displayName}),r.role&&e.jsx("div",{className:"bg-container-secondary-bg text-container-secondary-fg w-[calc(100%+1rem)] -mb-2 text-center rounded-b-container-secondary-rounding rounded-t-sm p-1",children:r.role})]})]},r.avatarUrl))})]})]})]})]})]}):(t("/app/a/store"),null)},Ce=()=>e.jsxs(J,{children:[e.jsx(u,{index:!0,element:e.jsx(L,{})}),e.jsxs(u,{path:"cat",children:[e.jsx(u,{index:!0,element:e.jsx(A,{})}),e.jsx(u,{path:":id",element:e.jsx(T,{})})]}),e.jsxs(u,{path:"category",children:[e.jsx(u,{index:!0,element:e.jsx(L,{})}),e.jsx(u,{path:":id",element:e.jsx(T,{})})]}),e.jsxs(u,{path:"app",children:[e.jsx(u,{index:!0,element:e.jsx(A,{})}),e.jsx(u,{path:":id",element:e.jsx(be,{})})]})]});export{Ce as default};
