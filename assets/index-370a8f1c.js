import{u as h,j as e,b as d,c as p,h as k,r as m,M as b,n as S,f,Y as g,D as E,B as $,I as C,R as O,a as x,C as v}from"./index-66ab9f12.js";import{C as A}from"./Carousel-2a2fb5f8.js";import{S as L}from"./Spinner-2e3e9e68.js";const T="/assets/background-038d9528.svg",P="_component_g4mjd_6",R="_background_g4mjd_14",U="_gradient_g4mjd_33",B="_label_g4mjd_42",j={component:P,background:R,gradient:U,label:B},q=({id:s})=>{const n=h();return e.jsxs(d,{onClick:()=>n(`/app/a/store/cat/${s}`),className:j.component,children:[e.jsx("div",{className:j.background,style:{backgroundImage:`url(${T})`}}),e.jsx("div",{className:j.gradient}),e.jsx("span",{className:j.label,children:s.slice(0,1).toUpperCase()+s.slice(1)})]})},J="_component_25j1f_6",Y="_section_25j1f_15",H="_label_25j1f_21",_={component:J,section:Y,label:H},G=({displayName:s,id:n,icon:l})=>{const c=h();return e.jsxs(d,{onClick:()=>c(`/app/a/store/app/${n}`),className:_.component,children:[e.jsx("img",{loading:"lazy",src:`${p.getInstanceUrl()}${l}`,className:"aspect-square h-16",alt:""}),e.jsx("div",{className:_.section,children:e.jsx("span",{className:_.label,children:s})})]})},y=()=>{const s=k("store"),[n,l]=m.useState([]),[c,i]=m.useState([]),[a,r]=m.useState([]);return m.useEffect(()=>{p.getJson("/app/store/promoted/applications",t=>{l(t)}),p.getJson("/app/store/categories",t=>{i(t)}),p.getJson("/app/store/applications",t=>{r(t)})},[]),e.jsxs("main",{children:[e.jsxs("header",{className:"w-full flex flex-col items-center justify-center pt-2 pb-4 bg-container-bg bg-opacity-40 backdrop-blur-lg animate__animated animate__fadeIn",children:[e.jsx("h2",{className:"text-3xl font-semibold tracking-wide pt-1 pb-3",children:"YourDash Store"}),e.jsx(A,{containerClassName:"max-w-4xl w-full h-64",children:n.map(t=>e.jsx("div",{className:"w-full h-full",children:e.jsx("div",{style:{backgroundImage:`url(${t.backgroundImage})`},className:"w-full h-full ml-auto mr-auto overflow-hidden rounded-2xl bg-center bg-cover flex items-center justify-end",children:e.jsxs("div",{className:"w-full pt-3 pb-3 pl-12 pr-12 flex items-center bg-container-bg bg-opacity-75 backdrop-blur-md mt-auto",children:[e.jsx("img",{className:"h-12 aspect-square",src:t.icon,alt:""}),e.jsx("span",{className:"mr-auto pl-2 text-lg",children:t.displayName}),e.jsx(b,{disabled:t.installed,className:"h-max",children:t.installed?"Installed":"Install"})]})})},t.name))})]}),e.jsx("h2",{className:"text-3xl font-semibold tracking-wide pt-2 pl-5 animate__animated animate__fadeIn animate__250ms",children:s("ALL_CATEGORIES_SECTION")}),c.length!==0&&e.jsx("section",{className:"p-4 grid 3xl:grid-cols-3 md:grid-cols-2 grid-cols-1 lg:gap-2 gap-1 animate__animated animate__fadeIn animate__250ms",children:c.map(t=>e.jsx(q,{id:t},t))}),e.jsx("h2",{className:"text-3xl font-semibold tracking-wide pt-2 pl-5 animate__animated animate__fadeIn animate__500ms",children:s("ALL_APPLICATIONS_SECTION")}),a.length!==0&&e.jsx("section",{className:"p-4 grid grid-cols-1 gap-2 animate__animated animate__fadeIn animate__500ms md:grid-cols-2 lg:grid-cols-3",children:a.map(t=>e.jsx(G,{id:t.id,displayName:t.displayName,icon:t.icon},t.id))})]})},I=()=>{const s=h(),{id:n}=S(),[l,c]=m.useState(),[i,a]=m.useState(!0);return m.useEffect(()=>{p.getJson(`/app/store/category/${n}`,r=>{c(r),a(!1)},()=>{s("/app/a/store")})},[n,s]),n?e.jsxs("div",{className:"grid grid-rows-[auto,1fr] h-full",children:[e.jsxs("header",{className:"bg-container-bg text-container-fg border-b-[1px] border-b-container-border p-2 pr-4 flex gap-2 animate__animated animate__fadeIn",children:[e.jsx(f,{icon:g.ChevronLeft,onClick:()=>{s("/app/a/store/")}}),e.jsx("h1",{className:"text-3xl font-semibold tracking-wide",children:`YourDash Store | ${l==null?void 0:l.displayName}`})]}),e.jsx("main",{children:i?e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(L,{})}):e.jsx("div",{className:"w-full max-h-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-8 animate__animated animate__fadeIn animate__250ms",children:l&&l.applications.map(r=>e.jsxs(d,{className:"flex items-center gap-2 text-2xl font-semibold tracking-wide",onClick:()=>s(`/app/a/store/app/${r.name}`),children:[e.jsx("img",{alt:"",src:r.icon,className:"h-16 aspect-square"}),e.jsx("span",{children:r.displayName})]},r.name))})})]}):(s("/app/a/store"),null)},M="/assets/background-038d9528.svg",z=({applicationData:s,onClose:n,onConfirm:l})=>{var i;const c=h();return e.jsx(E,{onClose:()=>{n()},children:e.jsxs(d,{showBorder:!0,level:"secondary",children:[e.jsxs("section",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-semibold tracking-wide",children:`Confirm installation of ${s==null?void 0:s.displayName}`}),e.jsx(f,{icon:g.X,onClick:()=>{n()}})]}),e.jsxs("section",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{children:`Do you want to install ${s==null?void 0:s.displayName}?`}),(s==null?void 0:s.dependencies)&&((i=s.dependencies)==null?void 0:i.length)!==0&&e.jsxs(d,{level:"tertiary",className:"flex flex-col gap-2",children:[e.jsx("div",{children:"The following dependency applications will be installed automatically."}),e.jsx("div",{className:"flex flex-wrap w-full",children:s.dependencies.map(a=>e.jsx(d,{className:"p-2 flex-grow text-center",level:"tertiary",onClick:()=>{c(`/app/a/store/app/${a}`)},children:a},a))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx($,{onClick:()=>{n()},children:"Cancel"}),e.jsx(b,{onClick:()=>{l()},children:"Confirm installation"})]})]})]})})};function N(s,n,l,c){p.getJson(`/app/store/application/${s}`,i=>{n(i),l(!1)},()=>{c("/app/a/store")})}const F=()=>{var w;const s=k("store"),n=h(),{id:l}=S(),[c,i]=m.useState(!0),[a,r]=m.useState(),[t,u]=m.useState(!1);return m.useEffect(()=>{u(!1),i(!0),N(l||"dash",o=>r(o),i,n)},[l,n]),l?e.jsxs("div",{className:"h-full relative",children:[t&&e.jsx(z,{applicationData:a,onClose:()=>u(!1),onConfirm:()=>{p.postJson(`/app/store/application/install/${a==null?void 0:a.name}`,{},o=>{o.success&&N(l,r,i,n),window.__yourdashCorePanelReload()}),u(!1)}}),c?e.jsxs("div",{className:"w-full h-full flex items-center justify-center",children:[e.jsx(L,{}),"TODO: add a back button"]}):a&&e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"flex flex-col w-full bg-container-bg",children:[e.jsxs("div",{style:{backgroundImage:`url(${M})`},className:"sm:h-64 h-32 transition-all bg-cover bg-center flex select-none items-center justify-center flex-row gap-3 animate__animated animate__fadeIn",children:[e.jsx("img",{className:"aspect-square drop-shadow-lg sm:w-24 w-0 transition-all",src:a.icon,draggable:!1,alt:""}),e.jsx("h1",{className:"text-5xl tracking-wider font-black drop-shadow-lg w-max",children:a.displayName})]}),e.jsxs("section",{className:"flex items-center p-4 gap-4 max-w-[50rem] w-full ml-auto mr-auto animate__animated animate__fadeIn animate__250ms",children:[e.jsx(f,{icon:g.ChevronLeft,onClick:()=>{n(`/app/a/store/cat/${a==null?void 0:a.category}`)}}),e.jsx("img",{className:"w-24 aspect-square select-none",src:a.icon,draggable:!1,alt:""}),e.jsx("h1",{className:"text-4xl font-semibold tracking-wide mr-auto",children:a.displayName}),e.jsxs("div",{className:"flex gap-2",children:[a.installed&&e.jsx(b,{onClick:()=>{n(`/app/a/${a.name}`)},children:s("OPEN_APPLICATION")}),e.jsx($,{onClick:()=>{a.installed?p.postJson(`/app/store/application/uninstall/${a.name}`,{},o=>{o.success&&N(l,r,i,n),window.__yourdashCorePanelReload()}):u(!0)},children:a.installed?s("UNINSTALL"):s("INSTALL")})]})]})]}),e.jsxs("main",{className:"p-4 flex flex-col gap-2 max-w-[50rem] w-full ml-auto mr-auto animate__500ms animate__animated animate__fadeIn",children:[e.jsx(d,{children:a.description}),e.jsx("h2",{className:"text-2xl font-medium",children:s("ABOUT_SECTION")}),e.jsxs(d,{className:"flex flex-col items-start",children:[e.jsx("div",{children:`Category: ${a.category}`}),e.jsx("div",{children:`ID: ${a.name}`}),e.jsx("br",{}),e.jsx("div",{children:"Created as part of the YourDash Project"})]}),e.jsx("h2",{className:"text-2xl font-medium",children:s("SOURCE_CODE_SECTION")}),e.jsxs("section",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(d,{onClick:()=>{window.open(`https://github.com/yourdash-app/yourdash/tree/main/client/src/app/apps/${a.name}`)},className:"flex gap-1 items-center",children:[e.jsx(C,{className:"h-5",icon:g.Link}),e.jsx("span",{children:"Client"})]}),e.jsxs(d,{onClick:()=>{window.open(`https://github.com/yourdash-app/yourdash/tree/main/server/src/apps/${a.name}`)},className:"flex gap-1 items-center",children:[e.jsx(C,{className:"h-5",icon:g.Link}),e.jsx("span",{children:"Server"})]})]}),e.jsx("h2",{className:"text-2xl font-medium",children:s("AUTHORS_SECTION")}),e.jsx("section",{className:"w-full",children:e.jsx(A,{children:(w=a.authors)==null?void 0:w.map(o=>e.jsxs(d,{className:"flex flex-col gap-2",children:[e.jsx("img",{className:"h-32 aspect-square rounded-container-rounding",src:o.avatarUrl,alt:o.avatarUrl}),e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{children:o.displayName}),o.site&&e.jsx(f,{onClick:()=>{window.location.href=o.site},icon:g.Link})]})]},o.avatarUrl))})})]})]})]}):(n("/app/a/store"),null)},V=()=>e.jsxs(O,{children:[e.jsx(x,{index:!0,element:e.jsx(y,{})}),e.jsxs(x,{path:"cat",children:[e.jsx(x,{index:!0,element:e.jsx(v,{})}),e.jsx(x,{path:":id",element:e.jsx(I,{})})]}),e.jsxs(x,{path:"category",children:[e.jsx(x,{index:!0,element:e.jsx(y,{})}),e.jsx(x,{path:":id",element:e.jsx(I,{})})]}),e.jsxs(x,{path:"app",children:[e.jsx(x,{index:!0,element:e.jsx(v,{})}),e.jsx(x,{path:":id",element:e.jsx(F,{})})]})]});export{V as default};
