import{j as e,k as _,e as E,b as N,r as p,c as C,v as I,u as $,I as m,Y as d,h as S}from"./index-5bcd9038.js";import{R as x}from"./Row-2b29ad51.js";import{a as H,g as M}from"./getWeatherIconFromState-88a70680.js";const R="_component_kzw0j_6",L="_toggled_kzw0j_25",y={component:R,toggled:L},j=({children:i,active:s,onClick:c})=>e.jsx("button",{type:"button",className:`${y.component} ${s?y.toggled:""}`,onClick:c,children:i}),W="/assets/droplet-8e7a2427.svg",P=({time:i,conditionIcon:s,conditionState:c,temperature:o,feelsLike:t,rainChance:a})=>(_("weather"),E.useState(!1),e.jsx(e.Fragment,{children:e.jsx("div",{className:"h-max mt-auto mb-auto flex flex-col items-center justify-center",children:e.jsxs(N,{className:"flex flex-col items-center justify-center",onClick:()=>{console.log("IMPLEMENT ME!!!")},children:[e.jsx("span",{children:i}),e.jsx("img",{alt:"",className:"aspect-square h-16",src:s}),e.jsx("span",{children:`${o}°C`}),e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("img",{className:"h-full",src:W,alt:""}),e.jsx("span",{children:`${a}%`})]}),e.jsx("span",{children:`${t}°C`})]})})})),T="_widget_1taem_6",z="_header_1taem_14",B="_hours_1taem_21",g={widget:T,header:z,hours:B},b=()=>{const i=_("weather"),[s,c]=p.useState(null);return p.useEffect(()=>{C.getJson(`/app/weather/location/${C.userDB.get("app:dash:widget:weather:location")||"2643743"}`,o=>{c(o),console.log(o)})},[]),s?e.jsxs(N,{className:g.widget,children:[e.jsx("section",{className:g.header,children:e.jsx("div",{children:H(i,s.currentWeather,!1)})}),e.jsx(x,{className:g.hours,children:s==null?void 0:s.hourly.time.map((o,t)=>{const a=s==null?void 0:s.hourly.temperature[t],u=s==null?void 0:s.hourly.weatherState[t],f=M(u),l=s==null?void 0:s.hourly.precipitationProbability[t],n=s==null?void 0:s.hourly.temperature[t],r=new Date(o),v=new Date,w=u;if(r.getHours()<v.getHours())return null;const k=`${r.getHours()<10?`0${r.getHours()}`:r.getHours()}:${r.getMinutes()<10?`0${r.getMinutes()}`:r.getMinutes()}`;return e.jsx(P,{conditionState:w,conditionIcon:f,time:k,feelsLike:n,rainChance:l,temperature:a},o)})}),e.jsx("a",{href:"https://open-meteo.com",className:"mt-auto ml-auto pr-1.5 pt-1 text-[#ffffff55] text-sm",children:"Powered by open-meteo.com"})]}):e.jsx(I,{})},F="_content_1ni5v_6",G="_addWidget_1ni5v_20",O="_icon_1ni5v_35",Y="_label_1ni5v_38",h={content:F,addWidget:G,icon:O,label:Y},J=({username:i,fullName:s})=>{const[c,o]=p.useState(!1),[t,a]=p.useState([b]),u=$(),f=_("dash");return e.jsxs("main",{className:"flex flex-col w-full min-h-full h-full overflow-y-auto",children:[e.jsxs("header",{className:"p-6 pl-8 pr-8 flex flex-col from-container-bg to-transparent bg-gradient-to-b",children:[e.jsxs(x,{children:[e.jsx("span",{className:"text-5xl font-bold [text-shadow:#242424bb_0_0_0.75rem,_#24242488_0_0_0.5rem,_#24242444_0_0_0.25rem]",children:f("LOCALISED_GREETING",[s.first,s.last])}),e.jsx(m,{className:"ml-auto",icon:d.Pencil,onClick:()=>{o(!c)}}),e.jsx(m,{icon:d.Gear,onClick:()=>{u("/app/a/settings/personalization/dashboard")}})]}),e.jsxs(x,{className:"pt-6 flex-wrap child:flex-grow md:child:flex-grow-0",children:[e.jsx(j,{onClick:()=>0,children:"Weather 20°C"}),e.jsx(j,{onClick:()=>0,active:!0,children:"Rain at 3pm"}),e.jsx(j,{onClick:()=>0,children:"You have 76 unread notifications"})]})]}),e.jsxs("section",{className:h.content,children:[t.map((l,n)=>c?e.jsx("div",{className:"@container",children:e.jsxs(N,{showBorder:!0,className:"flex items-center justify-center @lg:flex-row flex-col gap-2",children:[e.jsx("h3",{children:l.displayName||l.name}),e.jsxs(x,{children:[n!==0&&e.jsx(m,{icon:d.ChevronLeft,onClick:()=>{a(t.slice(0,n-1).concat(t.slice(n)))}}),e.jsx(m,{icon:d.Trash,onClick:()=>{a(t.slice(0,n).concat(t.slice(n+1)))}}),n!==t.length-1&&e.jsx(m,{icon:d.ChevronRight,onClick:()=>{a(t.slice(0,n).concat(t.slice(n+1)).concat(t.slice(n)))}})]})]},l.name)},l.name+n):e.jsx(l,{},l.name+n)),c&&e.jsxs("div",{className:h.addWidget,onClick:()=>{a(t.concat(b))},children:[e.jsx(S,{className:h.icon,icon:d.Plus}),e.jsx("div",{className:h.label,children:"Add widget"})]})]})]})};export{J as default};
