import{b as f,c as N,u as b,j as t,d as l,e as I,r as u,I as B,U as R,f as y,T,g as k,h as m,i as E,B as j,k as w,m as P,D as S,n as A}from"./index-5c94e495.js";import{R as $}from"./RightClickMenuContext-2d5ecc52.js";const D="_launcherButton_1wcy6_10",F="_launcherButtonIcon_1wcy6_42",M="_widgetContainer_1wcy6_46",L={launcherButton:D,launcherButtonIcon:F,widgetContainer:M},U="_applicationLauncher_9miwi_10",J="_content_9miwi_25",q="_sideTop_9miwi_43",z="_sideRight_9miwi_66",O="_sideBottom_9miwi_90",Q="_sideLeft_9miwi_113",G="_invisible_9miwi_137",K="_footer_9miwi_142",d={applicationLauncher:U,content:J,sideTop:q,sideRight:z,sideBottom:O,sideLeft:Q,invisible:G,footer:K},V=({items:i,children:o,className:e})=>f.jsx(N.Consumer,{children:n=>f.jsx("div",{className:e,onContextMenu:c=>{c.stopPropagation(),c.preventDefault();const a=c.currentTarget.getBoundingClientRect();n.createMenu({x:c.pageX,y:c.pageY,width:a.width,height:a.height,items:i});const s=r=>{r.preventDefault(),n.destroyMenu(),window.removeEventListener("click",s),window.removeEventListener("contextmenu",s)};window.addEventListener("click",s),window.addEventListener("contextmenu",s)},children:o})}),X="_grid_1ayy9_6",Y="_itemIcon_1ayy9_14",W="_itemLabel_1ayy9_21",H="_item_1ayy9_14",Z="_itemContent_1ayy9_34",h={grid:X,itemIcon:Y,itemLabel:W,item:H,itemContent:Z},ee=({modules:i})=>{const o=b();return t.jsx("section",{className:h.grid,children:i.map(e=>t.jsx(V,{items:[{label:"Pin To Panel",async onClick(){var n;return await l.postJson("/core/panel/quick-shortcuts/create",{id:e.id,moduleType:e.type}),(n=window.__yourdashCorePanelQuickShortcutsReload)==null||n.call(window),0}},{label:"Open In New Tab",onClick(){return window.open(`${window.location.origin}${window.location.pathname}/app/a/${e.id}`,"_blank"),0}}],className:h.item,children:t.jsxs(I,{onClick:()=>{o(e.url)},className:h.itemContent,children:[t.jsx("img",{className:h.itemIcon,src:`${l.getInstanceUrl()}${e.icon}`,draggable:!1,loading:"lazy",alt:""}),t.jsx("span",{className:h.itemLabel,children:e.displayName})]})},e.id))})},te="_searchBar_1e44p_6",ne={searchBar:te},v=({items:i,children:o,...e})=>{const n=u.useContext($);return t.jsx("section",{...e,onContextMenu:c=>{c.stopPropagation(),c.preventDefault();const a=c.currentTarget.getBoundingClientRect();n(c.pageX,c.pageY,a.width,a.height,!0,i);const s=r=>{r.preventDefault(),n(0,0,a.width,a.height,!1,[]),window.removeEventListener("click",s),window.removeEventListener("contextmenu",s)};window.addEventListener("click",s),window.addEventListener("contextmenu",s)},children:o})},ie="_grid_mw6bn_6",oe="_itemIcon_mw6bn_14",se="_itemLabel_mw6bn_21",ae="_item_mw6bn_14",ce="_itemContent_mw6bn_35",g={grid:ie,itemIcon:oe,itemLabel:se,item:ae,itemContent:ce},re=({applications:i})=>{const o=b();return t.jsx("section",{className:g.grid,children:i.map(e=>t.jsx(v,{items:[{label:"Pin To Panel",async onClick(){var n;return await l.postJson("/core/panel/quick-shortcuts/create",{id:e.id,moduleType:e.type}),(n=window.__yourdashCorePanelQuickShortcutsReload)==null||n.call(window),0}},{label:"Open In New Tab",onClick(){return window.open(`${window.location.origin}${window.location.pathname}/app/a/${e.id}`,"_blank"),0}}],className:g.item,onClick:()=>{o(e.url)},children:t.jsxs("div",{className:g.itemContent,children:[t.jsx("img",{loading:"lazy",className:g.itemIcon,src:`${l.getInstanceUrl()}${e.icon}`,draggable:!1,alt:""}),t.jsx("span",{className:g.itemLabel,children:e.displayName})]})},e.id))})},le=({items:i,className:o,icon:e})=>{const n=u.useContext($),[c,a]=u.useState(!1);return t.jsx(B,{icon:e,className:o,onClick:s=>{s.stopPropagation(),s.preventDefault();const r=s.currentTarget.getBoundingClientRect();if(c){n(0,0,r.width,r.height,!1,[]),a(!1);return}n(r.left,r.bottom,r.width,r.height,!0,i.map(_=>({label:_.label,onClick:()=>{_.onClick()},shortcut:_.shortcut}))),a(!0);const x=_=>{_.preventDefault(),n(0,0,r.width,r.height,!1,[]),a(!1),window.removeEventListener("click",x),window.removeEventListener("contextmenu",x)};window.addEventListener("click",x),window.addEventListener("contextmenu",x)}})},de="_grid_bno12_6",me="_itemIcon_bno12_14",ue="_itemLabel_bno12_21",_e="_item_bno12_14",we="_itemContent_bno12_35",p={grid:de,itemIcon:me,itemLabel:ue,item:_e,itemContent:we},he=({applications:i})=>{const o=b();return t.jsx("section",{className:p.grid,children:i.map(e=>t.jsx(v,{items:[{label:"Pin To Panel",async onClick(){var n;return await l.postJson("/core/panel/quick-shortcuts/create",{id:e.id,moduleType:e.type}),(n=window.__yourdashCorePanelQuickShortcutsReload)==null||n.call(window),0}},{label:"Open In New Tab",onClick(){return window.open(`${window.location.origin}${window.location.pathname}/app/a/${e.id}`,"_blank"),0}}],className:p.item,onClick:()=>{o(e.url)},children:t.jsxs("div",{className:p.itemContent,children:[t.jsx("img",{loading:"lazy",className:p.itemIcon,src:`${l.getInstanceUrl()}${e.icon}`,draggable:!1,alt:""}),t.jsx("span",{className:p.itemLabel,children:e.displayName}),t.jsx(le,{className:"ml-auto",items:[{label:"Pin To Panel",async onClick(){var n;return await l.postJson("/core/panel/quick-shortcuts/create",{id:e.id,moduleType:e.type}),(n=window.__yourdashCorePanelQuickShortcutsReload)==null||n.call(window),0}},{label:"Open In New Tab",onClick(){return window.open(`${window.location.origin}${window.location.pathname}/app/a/${e.id}`,"_blank"),0}}],icon:R.ThreeBars})]})},e.id))})};let C=[];const ge=({apps:i,layout:o})=>{const e=b(),[n,c]=y.useState(i);return u.useEffect(()=>{c(i)},[i]),t.jsxs(t.Fragment,{children:[t.jsx(T,{accessibleName:"Search Applications",placeholder:"Search Applications",className:k(ne.searchBar,"top-0 sticky z-10"),onEnter:()=>{C.length===1&&e(`/app/a/${C[0].displayName}`)},onChange:a=>{C=i.filter(s=>s.displayName.toLowerCase().includes(a.toLowerCase())||s.description.toLowerCase().includes(a.toLowerCase())||s.displayName.toLowerCase().includes(a.toLowerCase())),c(C)},icon:m.Search}),o==="large-grid"&&t.jsx(ee,{modules:n}),o==="small-grid"&&t.jsx(re,{applications:n}),o==="list"&&t.jsx(he,{applications:n})]})},pe=({side:i,visible:o})=>{var s;const e=b(),n=E(()=>l.getJson("/core/panel/applications"),[])||[],[c,a]=y.useState("large-grid");return t.jsxs("div",{className:k(d.applicationLauncher,i==="top"&&`${d.sideTop} animate__slideInLeft`,i==="right"&&`${d.sideRight} animate__slideInDown`,i==="bottom"&&`${d.sideBottom} animate__slideInLeft`,i==="left"&&`${d.sideLeft} animate__slideInDown`,"animate__animated animate__duration_500ms",!o&&d.invisible),children:[t.jsx(j,{className:d.content,children:t.jsx(ge,{apps:n,layout:c})}),t.jsxs(j,{className:d.footer,children:[t.jsx(w,{accessibleLabel:"Logout",className:d.logoutButton,icon:m.Logout,onClick:()=>{l.logout(),e("/login")}}),t.jsx("div",{children:t.jsx(w,{accessibleLabel:"Profile",icon:m.Person,"aria-label":"User Profile Settings",onClick:()=>{e("/instance-profiles/me")}})}),t.jsx("span",{children:((s=l.userDB.get("user:name"))==null?void 0:s.first)||"Unknown First Name"}),t.jsx(w,{accessibleLabel:"Filter small grid",className:"ml-auto",icon:m.Filter,onClick:()=>{a("small-grid")}}),t.jsx(w,{accessibleLabel:"Filter large grid",icon:m.Filter,onClick:()=>{a("large-grid")}}),t.jsx(w,{accessibleLabel:"Filter list",icon:m.Filter,onClick:()=>{a("list")}})]})]})},be=u.memo(pe),Le=({side:i})=>{const[o,e]=y.useState(!1),n=P();return u.useEffect(()=>{e(!1)},[n]),t.jsx(S,{children:t.jsxs("div",{className:L.widgetContainer,children:[t.jsx("button",{"aria-label":"Application Launcher",className:L.launcherButton,onClick:()=>e(!o),children:t.jsx(A,{icon:m.AppLauncher,className:L.launcherButtonIcon})}),t.jsx(be,{side:i,visible:o})]})})};export{Le as default};
