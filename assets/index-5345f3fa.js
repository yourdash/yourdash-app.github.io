import{r,j as t,i as S,C as j,w as k,A as v,v as y,U as J,e as b,R as C,a as q}from"./index-35df064e.js";import{D as O}from"./DropdownButton-7aa3cdf8.js";import{T as w}from"./TextBox-f6a9c52c.js";const A=({onChange:n,options:l,onBlur:d,label:o,placeholder:x,className:f,onKeyDown:N})=>{const[E,h]=r.useState(!1),[i,p]=r.useState([]),g=r.useRef(null);return t.jsxs("div",{className:S("relative transition-all border-none",f),children:[t.jsx("span",{className:S("pl-2 pr-2 bg-base-700 absolute -top-1 left-2.5 text-sm z-10 [line-height:.65rem] select-none text-base-400"),children:o}),t.jsx("input",{placeholder:x,className:`w-full pl-2 pt-1 pb-1 pr-2 outline-none relative z-0 rounded-button-rounding bg-base-700 transition-all ${E?"hover:border-green-400 focus-within:border-green-400 border-2 border-base-600":"border-2 border-red-400"}`,type:"text",onFocus:s=>{l.includes(s.currentTarget.value)&&s.currentTarget.value!=="/"?p([]):p(l.filter(u=>u.includes(s.currentTarget.value)))},onBlur:s=>d==null?void 0:d(s),onKeyDown:s=>N==null?void 0:N(s),ref:g,onChange:s=>{const u=s.currentTarget.value;if(!u)return h(!1);n(u),p(l.filter(a=>a.includes(u))),l.includes(u)?(u!=="/"&&p([]),h(!0)):h(!1)}}),i.length!==0&&t.jsx(j,{className:"absolute top-full z-10 w-max flex flex-col p-2 gap-1",children:i.slice(0,25).map(s=>t.jsx(k,{className:"h-6 whitespace-nowrap w-full text-left",onClick:()=>{g.current&&(g.current.value=s,n(g.current.value),p([]),h(!0))},children:s},s))})]})};function L(n){b.syncGetJson("/app/endpoints/endpoints",l=>{const d=l.map(o=>{var x;return((x=o==null?void 0:o.route)==null?void 0:x.path)||null}).filter(o=>o!==null);n([...new Set(d)])})}const I=()=>{const n=v("endpoints"),[l,d]=r.useState("JSON"),[o,x]=r.useState("GET"),[f,N]=r.useState({}),[E,h]=r.useState(""),[i,p]=r.useState(""),[g,s]=r.useState([]),[u,a]=r.useState(!0),[T,c]=r.useState(!1),[R,m]=r.useState("");return r.useEffect(()=>{L(e=>s(e))},[]),t.jsxs("main",{className:"grid grid-cols-2 p-2 gap-2",children:[t.jsxs(j,{showBorder:!0,className:"w-full p-3 flex items-center justify-between sticky top-0 bg-container-bg text-container-fg col-span-2",children:[t.jsxs("section",{className:"flex items-center justify-center h-full gap-2",children:[t.jsx(O,{items:[{label:"Get",onClick(){x("GET")}},{label:"Post",onClick(){x("POST")}},{label:"Delete",onClick(){x("DELETE")}}],children:"Get"}),t.jsx(O,{items:[{label:"Text",onClick(){d("Text")}},{label:"JSON",onClick(){d("JSON")}}],children:"JSON"})]}),t.jsx("section",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:t.jsxs("div",{className:"flex items-center justify-center h-full gap-1.5",children:[t.jsx(y,{className:"h-9 aspect-square",preserveColor:!0,icon:J.YourDashLogo}),t.jsx("h2",{className:"text-3xl font-semibold tracking-wide",children:n("APPLICATION_NAME")})]})}),t.jsx("section",{className:"flex items-center justify-center h-full gap-2",children:t.jsx(k,{onClick:()=>{switch(c(!1),a(!0),o){case"GET":switch(l){case"Text":b.getText(i,e=>{m(e),a(!1)},e=>{c(e),a(!1)},f);break;case"JSON":b.syncGetJson(i,e=>{m(e),a(!1)},e=>{c(e),a(!1)},f);break;default:c(n("INTERNAL_ERROR"))}break;case"POST":switch(l){case"Text":b.postText(i,JSON.parse(E),e=>{m(e),a(!1)},e=>{c(e),a(!1)},f);break;case"JSON":b.postJson(i,JSON.parse(E),e=>{m(e),a(!1)},e=>{c(e),a(!1)},f);break;default:c(n("INTERNAL_ERROR"))}break;case"DELETE":switch(l){case"Text":b.deleteText(i,e=>{m(e),a(!1)},e=>{c(e),a(!1)},f);break;case"JSON":b.deleteJson(i,e=>{m(e),a(!1)},e=>{c(e),a(!1)},f);break;default:c(n("INTERNAL_ERROR"))}break;default:c(n("INTERNAL_ERROR"))}},children:n("SEND_REQUEST.LABEL")})})]}),t.jsxs(j,{showBorder:!0,className:"bg-container-bg text-container-fg rounded-container-rounding p-2 h-max flex flex-col",children:[t.jsx(A,{options:g,label:"Request Endpoint",onChange:e=>{p(e)},className:"mb-2"}),o!=="GET"&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"-mb-0.5 text-opacity-60 text-container-fg",children:"Request Body"}),t.jsx(w,{defaultValue:`{
  
}`,onChange:e=>{h(e.currentTarget.value)}})]}),t.jsx("span",{className:"-mb-0.5 text-opacity-60 text-container-fg",children:"Request Extra Headers"}),t.jsx(w,{defaultValue:`{
  
}`,onChange:e=>{N(JSON.parse(e.currentTarget.value))}})]}),!u&&t.jsxs(j,{className:"overflow-x-auto w-auto",showBorder:!0,children:[t.jsx("pre",{className:"bg-container-secondary-bg text-container-fg p-4 rounded-container-secondary-rounding w-auto",children:l==="JSON"?JSON.stringify(R,null,2):R.toString()}),T&&t.jsx("pre",{className:"bg-container-tertiary-bg text-red-400 p-4 rounded-container-rounding",children:T})]})]})},_=()=>t.jsx(C,{children:t.jsx(q,{index:!0,element:t.jsx(I,{})})});export{_ as default};
