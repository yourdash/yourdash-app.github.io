import{t as j,i as p,r as l,j as e,F as g,g as f,H as h,d as C,h as r,v as E,l as y,_ as k}from"./index-5c94e495.js";import{R as q,a as N}from"./index-81be8c96.js";import{B as d}from"./buttonWithIcon-f4fd35bd.js";const S="_page_1vqme_10",W="_header_1vqme_16",H="_tallHeader_1vqme_29",G="_headerEditMode_1vqme_35",M="_headerActions_1vqme_39",R="_widgetGrid_1vqme_46",b="_widgetGridWidget_1vqme_58",A="_actions_1vqme_64",I="_footer_1vqme_75",P="_centeredContent_1vqme_83",t={page:S,header:W,tallHeader:H,headerEditMode:G,headerActions:M,widgetGrid:R,widgetGridWidget:b,actions:A,footer:I,centeredContent:P},v=new j("/app/uk-ewsgit-dash-backend"),D=()=>{var x;const{pageCount:a}=p(()=>v.getJson("/widget/pages"))||{pageCount:0},[o,c]=l.useState(0),w=p(()=>v.getJson(`/widgets/${o}`),[o])||{widgets:[]},[n,m]=l.useState(!1),[_,u]=l.useState(!1);return e.jsxs("div",{className:t.page,children:[e.jsxs(g,{className:f(t.header,_&&t.tallHeader,n&&t.headerEditMode),direction:"row",children:[e.jsx(h,{text:`Hiya, ${(x=C.userDB.get("user:name"))==null?void 0:x.first}`,level:1}),n&&e.jsx(e.Fragment,{children:e.jsx(g,{direction:"row",className:t.headerActions,children:_?e.jsx(d,{text:"Use small header",icon:r.SidebarCollapse,onClick:()=>{u(!1)}}):e.jsx(d,{text:"Use tall header",icon:r.SidebarExpand,onClick:()=>{u(!0)}})})})]}),n?e.jsxs("div",{className:t.centeredContent,children:[e.jsx(h,{text:"Edit widgets"}),e.jsx(E,{text:"Edit",onClick:()=>{console.log("Edit widgets dialog")}})]}):e.jsx("div",{className:t.widgetGrid,children:w.widgets.map(s=>{const i=y(()=>F(`./widgets/${s.widgetType}/widget.tsx`));return e.jsx("div",{style:{"--position-x":s.position.x,"--position-y":s.position.y},className:t.widgetGridWidget,children:e.jsx(i,{data:s.data})},s.widgetType+JSON.stringify(s.position))})}),e.jsxs(g,{className:t.footer,direction:"row",children:[e.jsx("div",{children:Array(a).map((s,i)=>e.jsx("div",{className:o===i?t.active:void 0,onClick:()=>c(i),children:i+1},i))}),e.jsx("div",{className:t.actions,children:n?e.jsx(e.Fragment,{children:e.jsx(d,{text:"Confirm edits",icon:r.Check,onClick:()=>{m(!1)}})}):e.jsx(e.Fragment,{children:e.jsx(d,{text:"Edit",icon:r.Pencil,onClick:()=>{m(!0)}})})})]})]})};function F(a){switch(a){case"./widgets/applicationShortcut/widget":case"./widgets/applicationShortcut/widget.tsx":return k(()=>import("./widget-8f07bbf2.js"),["./widget-8f07bbf2.js","./index-5c94e495.js","./index-34e28ba9.css","./index-81be8c96.js","./widget-f1e319b4.css"],import.meta.url);default:return new Promise(function(o,c){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(c.bind(null,new Error("Unknown variable dynamic import: "+a)))})}}const $=()=>e.jsx(q,{children:e.jsx(N,{index:!0,element:e.jsx(D,{})})});export{$ as default};
