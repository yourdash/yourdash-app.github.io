import{j as e,f as j,e as f,S as g,m as p,Y as r,n as w,r as l,c as x,I as h,k as v,h as u,b as _,R as N,a as y}from"./index-5bcd9038.js";import{R as I}from"./RightClickMenu-c4c14159.js";import{p as o}from"./index-ca444653.js";import{a as b,C as S}from"./editor-3c445f98.js";const k="_view_jc07f_6",E={view:k},C=()=>e.jsx("section",{className:E.view,children:e.jsx("span",{children:"fileControlsHeader"})}),P="_view_1ahzg_6",F="_file_1ahzg_13",T="_odd_1ahzg_18",d={view:P,file:F,odd:T},R=({files:s})=>e.jsx("section",{className:d.view,children:s.map((t,a)=>{const i=a%2===1;return console.log(i),e.jsxs("div",{className:j(d.file,i&&d.odd),children:[e.jsx("div",{className:d.fileName,children:t.name}),e.jsx("div",{className:d.fileType,children:t.type.split(".")[1]})]},t.name)})}),B="_widget_1y5rb_6",$={widget:B},D=({filePath:s})=>e.jsx("div",{className:$.widget,children:s}),A=({path:s})=>e.jsx("section",{children:e.jsx(D,{filePath:s})}),L="_view_2nfvg_6",z={view:L},U=()=>e.jsxs("section",{className:z.view,children:[e.jsx(C,{}),e.jsx(R,{files:[{type:"file",name:"test.txt"},{type:"file",name:"test2.txt"},{type:"file",name:"test3.txt"},{type:"file",name:"test4.txt"}]}),e.jsx(A,{path:"/file/path"})]}),Y=({children:s})=>(f.useState(null),e.jsxs("div",{className:"grid grid-cols-[auto,1fr] h-full overflow-hidden",children:[e.jsx(g,{items:[{type:p.Button,label:"Upload File",icon:r.Upload,onClick:()=>0},{type:p.Separator,id:"sep1"}],title:"Files",defaultState:w.NormalExpanded}),e.jsx(U,{})]})),M=({path:s=""})=>{const t=l.useRef(null),[a,i]=l.useState(null);return l.useEffect(()=>{b[o.extname(s).replace(".","")].parser.then(m=>{i(m)})},[]),l.useEffect(()=>{t.current&&(new S(t.current),x.postText("/app/files/get/file",{path:s},m=>{}))},[!!t.current,s]),e.jsxs("section",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"flex gap-1",children:e.jsx(h,{icon:r.ArrowSwitch,onClick:()=>{}})}),e.jsx("div",{"data-yourdash-codestudio-editor":"true",className:"overflow-auto w-full p-2",ref:t})]})},O=({path:s=""})=>{const[t,a]=l.useState(null);return l.useEffect(()=>{x.postText("/app/files/get/file",{path:s},i=>{a(i)})},[s]),t?e.jsx("main",{className:"w-full h-full flex items-center justify-center overflow-auto",children:e.jsx("img",{alt:"",src:`${x.getInstanceUrl()}${t}`})}):null},H=({path:s})=>{const[t,a]=f.useState(null);switch(f.useEffect(()=>{switch(o.extname(s).replace(".","")){case"jpg":case"jpeg":case"png":case"gif":case"webp":case"svg":case"avif":a("image");break;default:a("text")}},[s]),t){case"image":return e.jsx(O,{path:s});case"text":return e.jsx(M,{path:s});default:return e.jsx("main",{className:"w-full h-full flex items-center justify-center overflow-hidden font-semibold text-5xl tracking-wide animate__animated animate__fadeIn",children:e.jsx("h1",{children:"Detecting file type..."})})}},J="_files_rxwwk_6",V="_item_rxwwk_10",W="_itemButton_rxwwk_15",q="_itemIcon_rxwwk_22",c={files:J,item:V,itemButton:W,itemIcon:q},G=()=>{const[s,t]=l.useState("/"),[a,i]=l.useState([]),m=v("files");return l.useEffect(()=>{x.postJson("/app/files/get/thumbnails-small",{path:s},n=>{if(Object.keys(n.files).length===0)return i([]);i((n==null?void 0:n.files)||[])})},[s]),e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"p-2 flex flex-col bg-container-bg top-0 sticky gap-2 shadow-lg z-10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{disabled:s==="/",onClick:()=>{t(o.join(s,".."))},icon:r.ChevronLeft}),e.jsx("span",{children:s})]}),!o.extname(s)&&e.jsxs("div",{className:j("bg-container-bg pl-2 pr-2 text-left transition-colors [transition:var(--transition)] hover:[transition:var(--transition-fast)] flex items-center"),children:[e.jsx(u,{icon:r.Info,className:"h-[calc(100%-0.35rem)] mr-1.5",color:"rgb(var(--container-fg))"}),e.jsx("span",{className:"mr-auto",children:m("NAME")}),e.jsx("span",{children:m("TYPE")})]})]}),o.extname(s)?e.jsx(H,{path:s}):e.jsx("section",{className:c.files,children:a.map(n=>e.jsx(I,{items:[{label:"Delete",onClick(){return 0}},{label:"Pin to sidebar",onClick(){return 0}}],className:c.item,children:e.jsxs(_,{onClick:()=>{t(o.join(s,n.name))},className:c.itemButton,children:[n.icon===""?n.type==="dir"?e.jsx(u,{className:c.itemIcon,icon:r.FileDirectory}):e.jsx(u,{className:c.itemIcon,icon:r.File}):e.jsx("img",{className:c.itemIcon,alt:"",src:`${x.getInstanceUrl()}${n.icon}`}),e.jsx("span",{className:"pl-2 pr-2 text-ellipsis",children:n.name})]})},n.name))})]})},K=()=>e.jsx(Y,{children:e.jsx(G,{})}),se=()=>e.jsx(N,{children:e.jsx(y,{index:!0,element:e.jsx(K,{})})});export{se as default};
