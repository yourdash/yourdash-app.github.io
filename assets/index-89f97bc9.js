import{u as g,j as e,b as x,k as p,n as v,r as o,o as I,M as N,A as k,I as S,Y as _,E as $,F as P,B as A,z as T,p as O,R as B,a as m,C as w}from"./index-4cf28dcc.js";const R="/assets/background-038d9528.svg",U="_component_g4mjd_6",J="_background_g4mjd_14",q="_gradient_g4mjd_33",Y="_label_g4mjd_42",h={component:U,background:J,gradient:q,label:Y},H=({id:a})=>{const l=g();return e.jsxs(x,{onClick:()=>l(`/app/a/store/cat/${a}`),className:h.component,children:[e.jsx("div",{className:h.background,style:{backgroundImage:`url(${R})`}}),e.jsx("div",{className:h.gradient}),e.jsx("span",{className:h.label,children:a.slice(0,1).toUpperCase()+a.slice(1)})]})},z="_component_25j1f_6",F="_section_25j1f_15",G="_label_25j1f_21",f={component:z,section:F,label:G},L=({displayName:a,id:l,icon:t})=>{const i=g();return e.jsxs(x,{onClick:()=>i(`/app/a/store/app/${l}`),className:f.component,children:[e.jsx("img",{loading:"lazy",src:`${p.getInstanceUrl()}${t}`,className:"aspect-square h-16",alt:""}),e.jsx("div",{className:f.section,children:e.jsx("span",{className:f.label,children:a})})]})},y=()=>{const a=v("store"),[l,t]=o.useState([]),[i,d]=o.useState([]),[r,s]=o.useState([]);return o.useEffect(()=>{p.getJson("/app/store/promoted/applications",n=>{t(n)}),p.getJson("/app/store/categories",n=>{d(n)}),p.getJson("/app/store/applications",n=>{s(n)})},[]),e.jsxs("main",{children:[e.jsxs("header",{className:"w-full flex flex-col items-center justify-center pt-2 pb-4 bg-container-bg bg-opacity-40 backdrop-blur-lg animate__animated animate__fadeIn",children:[e.jsx("h2",{className:"text-3xl font-semibold tracking-wide pt-1 pb-3",children:"YourDash Store"}),e.jsx(I,{containerClassName:"max-w-4xl w-full h-64",children:l.map(n=>e.jsx("div",{className:"w-full h-full",children:e.jsx("div",{style:{backgroundImage:`url(${n.backgroundImage})`},className:"w-full h-full ml-auto mr-auto overflow-hidden rounded-2xl bg-center bg-cover flex items-center justify-end",children:e.jsxs("div",{className:"w-full pt-3 pb-3 pl-12 pr-12 flex items-center bg-container-bg bg-opacity-75 backdrop-blur-md mt-auto",children:[e.jsx("img",{className:"h-12 aspect-square",src:n.icon,alt:""}),e.jsx("span",{className:"mr-auto pl-2 text-lg",children:n.displayName}),e.jsx(N,{disabled:n.installed,className:"h-max",children:n.installed?"Installed":"Install"})]})})},n.name))})]}),e.jsx("h2",{className:"text-3xl font-semibold tracking-wide pt-2 pl-5 animate__animated animate__fadeIn animate__250ms",children:a("ALL_CATEGORIES_SECTION")}),i.length!==0&&e.jsx("section",{className:"p-4 grid 3xl:grid-cols-3 md:grid-cols-2 grid-cols-1 lg:gap-2 gap-1 animate__animated animate__fadeIn animate__250ms",children:i.map(n=>e.jsx(H,{id:n},n))}),e.jsx("h2",{className:"text-3xl font-semibold tracking-wide pt-2 pl-5 animate__animated animate__fadeIn animate__500ms",children:a("ALL_APPLICATIONS_SECTION")}),r.length!==0&&e.jsx("section",{className:"p-4 grid grid-cols-1 gap-2 animate__animated animate__fadeIn animate__500ms md:grid-cols-2 lg:grid-cols-3",children:r.map(n=>e.jsx(L,{id:n.id,displayName:n.displayName,icon:n.icon},n.id))})]})},C=()=>{const a=g(),{id:l}=k(),[t,i]=o.useState(),[d,r]=o.useState(!0);return o.useEffect(()=>{p.getJson(`/app/store/category/${l}`,s=>{i(s),r(!1)},()=>{a("/app/a/store")})},[l,a]),l?e.jsxs("div",{className:"grid grid-rows-[auto,1fr] h-full",children:[e.jsxs("header",{className:"bg-container-bg text-container-fg border-b-[1px] border-b-container-border p-2 pr-4 flex gap-2 animate__animated animate__fadeIn",children:[e.jsx(S,{icon:_.ChevronLeft,onClick:()=>{a("/app/a/store/")}}),e.jsx("h1",{className:"text-3xl font-semibold tracking-wide",children:`YourDash Store | ${t==null?void 0:t.displayName}`})]}),e.jsx("main",{children:d?e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx($,{})}):e.jsx("div",{className:"w-full max-h-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-8 animate__animated animate__fadeIn animate__250ms",children:t&&t.applications.map(s=>e.jsx(L,{displayName:s.displayName,id:s.name,icon:s.icon},s.name))})})]}):(a("/app/a/store"),null)},M="/assets/background-038d9528.svg",K=({applicationData:a,onClose:l,onConfirm:t})=>{var d;const i=g();return e.jsx(P,{onClose:l,title:`Confirm installation of ${a==null?void 0:a.displayName}`,children:e.jsxs("section",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{children:`Do you want to install ${a==null?void 0:a.displayName}?`}),(a==null?void 0:a.dependencies)&&((d=a.dependencies)==null?void 0:d.length)!==0&&e.jsxs(x,{level:"tertiary",className:"flex flex-col gap-2",children:[e.jsx("div",{children:"The following dependency applications will be installed automatically."}),e.jsx("div",{className:"flex flex-wrap w-full",children:a.dependencies.map(r=>e.jsx(x,{className:"p-2 flex-grow text-center",level:"tertiary",onClick:()=>{i(`/app/a/store/app/${r}`)},children:r},r))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(A,{onClick:()=>{l()},children:"Cancel"}),e.jsx(N,{onClick:()=>{t()},children:"Confirm installation"})]})]})})};function j(a,l,t,i){p.getJson(`/app/store/application/${a}`,d=>{l(d),t(!1)},()=>{i("/app/a/store")})}const V=()=>{var b;const a=v("store"),l=T(),t=g(),{id:i}=k(),[d,r]=o.useState(!0),[s,n]=o.useState(),[E,u]=o.useState(!1);return o.useEffect(()=>{u(!1),r(!0),j(i||"dash",c=>n(c),r,t)},[i,t]),i?e.jsxs("div",{className:"h-full relative",children:[E&&e.jsx(K,{applicationData:s,onClose:()=>u(!1),onConfirm:()=>{p.postJson(`/app/store/application/install/${s==null?void 0:s.name}`,{},c=>{c.success&&(j(i,n,r,t),l.toast.success(`Installed "${s==null?void 0:s.name}" successfully`)),window.__yourdashCorePanelReload()}),u(!1)}}),d?e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx($,{})}):s&&e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"flex flex-col w-full bg-container-bg",children:[e.jsxs("div",{style:{backgroundImage:`url(${M})`},className:"sm:h-64 h-32 transition-all bg-cover bg-center flex select-none items-center justify-center flex-row gap-3 animate__animated animate__fadeIn",children:[e.jsx("img",{className:"aspect-square drop-shadow-lg sm:w-24 w-0 transition-all",src:s.icon,draggable:!1,alt:""}),e.jsx("h1",{className:"text-5xl tracking-wider font-black drop-shadow-lg w-max",children:s.displayName})]}),e.jsxs("section",{className:"flex items-center p-4 gap-4 max-w-[50rem] w-full ml-auto mr-auto animate__animated animate__fadeIn animate__250ms",children:[e.jsx(S,{icon:_.ChevronLeft,onClick:()=>{t(`/app/a/store/cat/${s==null?void 0:s.category}`)}}),e.jsx("img",{className:"w-24 aspect-square select-none",src:s.icon,draggable:!1,alt:""}),e.jsx("h1",{className:"text-4xl font-semibold tracking-wide mr-auto",children:s.displayName}),e.jsxs("div",{className:"flex gap-2",children:[s.installed&&e.jsx(N,{onClick:()=>{t(`/app/a/${s.name}`)},children:a("OPEN_APPLICATION")}),e.jsx(A,{onClick:()=>{s.installed?p.postJson(`/app/store/application/uninstall/${s.name}`,{},c=>{c.success&&(j(i,n,r,t),l.toast.success(`Uninstalled "${s.name}" successfully`)),window.__yourdashCorePanelReload()}):u(!0)},children:s.installed?a("UNINSTALL"):a("INSTALL")})]})]})]}),e.jsxs("main",{className:"p-4 flex flex-col gap-2 max-w-[50rem] w-full ml-auto mr-auto animate__500ms animate__animated animate__fadeIn",children:[e.jsx(x,{showBorder:!0,children:s.description}),e.jsx("h2",{className:"text-2xl font-medium",children:a("ABOUT_SECTION")}),e.jsxs(x,{showBorder:!0,className:"flex flex-col items-start",children:[e.jsx("div",{children:`Category: ${s.category}`}),e.jsx("div",{children:`ID: ${s.name}`}),e.jsx("br",{}),e.jsx("div",{children:"Created as part of the YourDash Project"})]}),e.jsxs(x,{showBorder:!0,onClick:()=>{window.open(`https://github.com/yourdash-app/yourdash/tree/main/packages/applications/${s.name}`)},className:"flex gap-1 items-center",children:[e.jsx(O,{className:"h-5",icon:_.Link}),e.jsx("span",{children:"View Source"})]}),e.jsx("h2",{className:"text-2xl font-medium",children:a("AUTHORS_SECTION")}),e.jsx("section",{className:"w-full",children:e.jsx(I,{children:(b=s.authors)==null?void 0:b.map(c=>e.jsxs(x,{className:"flex flex-col gap-2",showBorder:!0,onClick:()=>{window.location.href=c.site},children:[e.jsx("img",{className:"h-24 aspect-square rounded-container-rounding",src:c.avatarUrl,alt:c.avatarUrl}),e.jsxs("div",{className:"flex items-center justify-between gap-2 flex-col w-full",children:[e.jsx("span",{children:c.displayName}),c.role&&e.jsx("div",{className:"bg-container-secondary-bg text-container-secondary-fg w-[calc(100%+1rem)] -mb-2 text-center rounded-b-container-secondary-rounding rounded-t-sm p-1",children:c.role})]})]},c.avatarUrl))})})]})]})]}):(t("/app/a/store"),null)},W=()=>e.jsxs(B,{children:[e.jsx(m,{index:!0,element:e.jsx(y,{})}),e.jsxs(m,{path:"cat",children:[e.jsx(m,{index:!0,element:e.jsx(w,{})}),e.jsx(m,{path:":id",element:e.jsx(C,{})})]}),e.jsxs(m,{path:"category",children:[e.jsx(m,{index:!0,element:e.jsx(y,{})}),e.jsx(m,{path:":id",element:e.jsx(C,{})})]}),e.jsxs(m,{path:"app",children:[e.jsx(m,{index:!0,element:e.jsx(w,{})}),e.jsx(m,{path:":id",element:e.jsx(V,{})})]})]});export{W as default};
