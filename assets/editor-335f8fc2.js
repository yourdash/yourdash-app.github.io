var d=Object.defineProperty;var h=(t,e,r)=>e in t?d(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var i=(t,e,r)=>(h(t,typeof e!="symbol"?e+"":e,r),r);class a{static init(){window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp)}static addShortcut(e,r,s){const o=r.toLowerCase().replace(/\s+/g,"");e in this._shortcutKeys||(this._shortcutKeys[e]={}),this._shortcutKeys[e][o]=s}static removeShortcut(e,r){const s=r.toLowerCase().replace(/\s+/g,"");e in this._shortcutKeys&&s in this._shortcutKeys[e]&&delete this._shortcutKeys[e][s]}static handleKeyDown(e){this._currentKeys.push(e.key.toLowerCase());const r=this._currentKeys.join("+");for(const s in this._shortcutKeys)if(r in this._shortcutKeys[s]){this._shortcutKeys[s][r](),this._currentKeys=[];break}}static handleKeyUp(){this._currentKeys=[]}}i(a,"_shortcutKeys",{}),i(a,"_currentKeys",[]);function w(t){return{js:"javascript",json:"json",txt:"plainText"}[t]}function l(t){return{javascript:"./lang/javascript.ts",json:"./lang/json.ts",plainText:"./lang/plainText.ts"}[t]}class g{constructor(e){i(this,"language");i(this,"onParseListener");i(this,"worker");this.language=e,this.worker=new Worker(new URL(l(e),import.meta.url),{type:"module"}),this.worker.onmessage=r=>{var s;(s=this.onParseListener)==null||s.call(this,r.data.tokens.parsedTokens)}}onParse(e){this.onParseListener=e}parseString(e){return this.worker.postMessage({str:e}),this}parseLine(e,r){return this}terminate(){this.worker.terminate()}kill(){this.worker.terminate()}}var n=(t=>(t[t.Identifier=0]="Identifier",t[t.Keyword=1]="Keyword",t[t.String=2]="String",t[t.Number=3]="Number",t[t.Operator=4]="Operator",t[t.Punctuation=5]="Punctuation",t[t.Plain=6]="Plain",t[t.Comment=7]="Comment",t[t.Empty=8]="Empty",t))(n||{});const f={tokenTypes:{[n.Identifier]:"gold",[n.Keyword]:"#8888ff",[n.String]:"#77ee33",[n.Number]:"#cccccc",[n.Operator]:"#ffffff",[n.Punctuation]:"#ffffff",[n.Plain]:"#ffffff",[n.Comment]:"#888888",[n.Empty]:"#00000000"}};function m(t,e){t.innerHTML=e.map(s=>s.value).join("");let r="";return e.forEach(s=>{const o=document.createElement("span");o.textContent=s.value,o.style.color=f.tokenTypes[s.type]||"#555555",o.style.fontWeight=s.fontWeight,r+=o.outerHTML}),t.innerHTML=r,0}class y{constructor(e){i(this,"keyboardInputManager");i(this,"htmlContainer");i(this,"debugMode");return this.keyboardInputManager=new a,this.htmlContainer=e,this}loadRawCode(e,r,s){this._debugRenderParsedString(s,new g("javascript"))}_debugRenderParsedString(e,r){if(this.htmlContainer.innerHTML='<pre><code id="cs-text-output"></code></pre>',document.getElementById("cs-text-output")){document.getElementById("cs-text-output").style.fontFamily="Jetbrains Mono, JetbrainsMono Nerd Font, Fira Code, Source Code Pro, monospace";const s=256,o=0,u=e.split(`
`);r.onParse(c=>{m(document.getElementById("cs-text-output"),c)}),r.parseString(u.slice(o,s).join(`
`))}}}export{y as C,g as a,w as g};
